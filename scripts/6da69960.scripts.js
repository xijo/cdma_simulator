(function(){"use strict";angular.module("cdmaSimulatorApp",["ngCookies","ngResource","ngSanitize","ngRoute"]).config(["$routeProvider",function(a){return a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}])}).call(this),function(){"use strict";angular.module("cdmaSimulatorApp").factory("Code",function(){var a;return a=function(){function a(a){this.input=a,this.values="string"==typeof this.input?this.split(this.input):this.input}return a.prototype.split=function(a){return a.split("").map(function(a){return parseInt(a)})},a.prototype.shift=function(){var b;return b=this.values.map(function(a){return 0===a?-1:a}),new a(b)},a.prototype.stretch=function(b){var c,d,e,f,g,h,i;for(null==b&&(b=8),d=[],i=this.values,f=0,h=i.length;h>f;f++)for(e=i[f],c=g=1;b>=g;c=g+=1)d.push(e);return new a(d)},a.prototype.repeat=function(b){var c,d,e,f,g,h,i;for(null==b&&(b=4),d=[],c=f=1;b>=f;c=f+=1)for(i=this.values,g=0,h=i.length;h>g;g++)e=i[g],d.push(e);return new a(d)},a.prototype.spread=function(b){var c,d,e,f;for(d=[],c=e=0,f=this.values.length-1;f>=e;c=e+=1)d.push(this.values[c]*b.values[c]);return new a(d)},a.prototype.overlay=function(b){var c,d,e,f;for(d=[],c=e=0,f=this.values.length-1;f>=e;c=e+=1)d.push(this.values[c]+b.values[c]);return new a(d)},a.prototype.despread=function(b){var c,d,e,f;for(d=[],c=e=0,f=this.values.length-1;f>=e;c=e+=1)d.push(this.values[c]*b.values[c]);return new a(d)},a}()})}.call(this),function(){"use strict";var a;a=function(){function a(){this.chip_length=10,this.border=30}return a.prototype.draw=function(a,b,c,d){var e;return null==d&&(d=0),e=b.values,this.text(a,c,0,d+5),this.grid(e,c,d+20),this.code(e,c,d+20)},a.prototype.code=function(a,b,c){var d,e,f,g,h,i,j,k,l,m;for(d=this.border,h=[],f=_.min(a),e=_.max(a),g=function(){m=[];for(var a=f;e>=f?e>=a:a>=e;e>=f?a++:a--)m.push(a);return m}.apply(this).reverse(),k=0,l=a.length;l>k;k++)i=a[k],j=10+20*g.indexOf(i),h.push("L"+d+","+(c+j)+" L"+(d+this.chip_length)+","+(c+j)),d+=this.chip_length;return b.path("M"+this.border+","+(c+50)+" "+h.join(" ")).attr({stroke:"red"})},a.prototype.grid=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;for(d=this.border,h=_.min(a),g=_.max(a),i=function(){q=[];for(var a=h;g>=h?g>=a:a>=g;g>=h?a++:a--)q.push(a);return q}.apply(this).reverse(),e=-1*h+g+1,j=10,l=0,n=i.length;n>l;l+=1)f=i[l],this.text(f,b,5,c+j),j+=20;for(r=[],f=m=0,o=a.length*this.chip_length,p=this.chip_length;p>0?o>=m:m>=o;f=m+=p)k=b.path("M"+(d+f)+","+(c+0)+" L"+(d+f)+","+(c+20*e)),r.push(f/this.chip_length%8===0?k.attr({stroke:"#ccc","stroke-width":"2"}):k.attr({stroke:"#ccc","stroke-width":"1",opacity:"0.5"}));return r},a.prototype.text=function(a,b,c,d){return b.text(c,d,a).attr({"font-size":14,"font-family":"monospace","text-anchor":"start"})},a}(),angular.module("cdmaSimulatorApp").service("DrawerService",a)}.call(this),function(){"use strict";angular.module("cdmaSimulatorApp").controller("MainCtrl",["$scope","Code","DrawerService",function(a,b,c){return a.panel1=Raphael(document.getElementById("panel1"),400,300),a.panel2=Raphael(document.getElementById("panel2"),400,300),a.panel3=Raphael(document.getElementById("panel3"),400,300),a.updateCode=function(a,d,e){var f,g,h,i,j,k,l;return e.clear(),!a||(g=new b(a),g=g.shift().stretch(),c.draw("Data signal",g,e),!d||(l=new b(d),l=l.shift().repeat(a.length),c.draw("Spreading code",l,e,100),d.length<8))?void 0:(k=g.spread(l),c.draw("Spreaded code",k,e,200),h=new b([1,-1,1,1,-1,1,-1,1,-1,-1,-1,-1,1,1,-1,1,1,-1,1,1,-1,1,-1,1,-1,-1,-1,-1,1,1,-1,1]),i=new b([1,-1,1,-1,1,-1,-1,1,-1,-1,-1,-1,1,-1,1,-1,1,-1,1,1,1,-1,1,1,1,-1,-1,1,-1,1,-1,1]),j=k.overlay(h).overlay(i),f=j.despread(l),c.draw("Overlayed code",j,e,300),c.draw("Despreaded code",f,e,450))},a.randomSpread=function(b){var c,d;return d=_.without(a.possible_spreads,a.spread1,a.spread2),c=d[_.random(0,d.length-1)],1===b?(a.spread1=c,a.updateCode(a.code1,a.spread1,a.panel1)):(a.spread2=c,a.updateCode(a.code2,a.spread2,a.panel2))},a.possible_spreads=["11111111","10101010","11001100","10011001","11110000","10100101","11000011","10010110"]}])}.call(this);